<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>WebSocket Tracelog for mysql binlog</title>
    <style>
      .flex-row {
        display: flex;
        flex-direction: row;
      }
      .event {
        flex: 1 250px;
      }
      .fields {
        flex: 1;
      }
    </style>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        let ws = new WebSocket("__WEBSOCKET__")
        ws.onmessage = (e) => {
          console.log(e.data)
          const data = JSON.parse(e.data)
          let div = document.getElementById("container")
          div.innerHTML = div.innerHTML + 
            "<div class=\"flex-row\">" +
              "<div class=\"event\">" + data.event + "&nbsp;" + data.table + "</div>" +
              "<div class=\"fields\">" + JSON.stringify(data.fields) + "</div>" +
            "</div>"
          window.scrollTo(0,document.body.scrollHeight)
        }
      })
    </script>
  </head>
  <body>
    <h2>Mysql binlog trace</h2>
    <div id="container"><div>
  </body>
</html>

